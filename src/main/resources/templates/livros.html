<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Livros</title>
    <meta charset="UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<link rel="stylesheet" th:href="@{/css/styles.css}" />
  	<link rel="stylesheet" th:href="@{/css/table.css}" />
  	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
<div class="wrapper">
	<h1 class="destaque">Livros ðŸ“š</h1>
	<div id="carouselExample" class="carousel slide">
	  <div class="carousel-inner">
	    <div class="carousel-item active" data-slide-width="500">
	      <div>
		 	<h2>Adicionar Livro</h2>
		    <form class="d-block w-100" th:action="@{/livros/create}" th:object="${livroDTO}" method="post">
		        <input required maxlength="45" class="input-box" placeholder="nome" type="text" id="nome" name="nome"><br>
		        <input required maxlength="45" class="input-box" placeholder="autor" type="text" id="autor" name="autor"><br>
		        <input required maxlength="45" class="input-box" placeholder="editora" type="text" id="editora" name="editora"><br>
		        <input required maxlength="45" class="input-box" placeholder="isbn" type="number" id="isbn" name="isbn"><br>
		        <input required class="btn" type="submit" value="Adicionar">
		    </form>
		  </div>
	    </div>
    
    <div class="carousel-item table-div" data-slide-width="1000" data-slide-height="300">
		 <h2>Lista de Livros</h2>
		    <table class="custom-table table-wrapper">
				<thead class="custom-thead">
		        <tr>
		            <th>ID</th>
		            <th>TÃ­tulo</th>
		            <th>Autor</th>
		            <th>Editora</th>
		            <th>ISBN</th>
		            <th>Editar</th>
		            <th>Deletar</th>
		        </tr>
		        </thead>
		        
		        <tbody class="custom-tbody">
			        <tr th:each="livro : ${livros}" class="livro-row">
			            <td data-label="id" th:text="${livro.id}"></td>
			            <td data-label="nome" th:text="${livro.nome}"></td>
			            <td data-label="autor" th:text="${livro.autor}"></td>
			            <td data-label="editora" th:text="${livro.editora}"></td>
			            <td data-label="isbn" th:text="${livro.isbn}"></td>
			            <td>
							<button class="edit-button btnf" th:data-id="${livro.id}" th:href="@{/livros/edit/{id}(id=${livro.id})}">Editar</button>
			            </td>
			            <td>
    						<a class="btnf" th:href="@{/livros/delete/{id}(id=${livro.id})}">Deletar</a>
			            </td>			            
			        </tr>
		        </tbody>
		    </table> 
	    </div>
	  </div>
	</div>
	  	<button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
		    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		    <span class="visually-hidden">Previous</span>
	  	</button>
	  	<button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
		    <span class="carousel-control-next-icon" aria-hidden="true"></span>
		    <span class="visually-hidden">Next</span>
	  	</button>
</div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <script>
    $(document).ready(function() {
        function adjustWrapperWidth(slideWidth) {
            $('.wrapper').css('width', slideWidth);
        }

        // FunÃ§Ã£o para ajustar o tamanho do wrapper
        function setWrapperSize() {
            var activeSlide = $('.carousel-item.active');
            var activeSlideWidth = activeSlide.data('slide-width');
            adjustWrapperWidth(activeSlideWidth);
        }

        // Ajusta o tamanho do wrapper ao carregar a pÃ¡gina
        $(window).on('load', function() {
            setWrapperSize();
        });

        // Ajusta o tamanho do wrapper sempre que o slide mudar
        $('#carouselExample').on('slide.bs.carousel', function(event) {
            var nextSlide = $(event.relatedTarget);
            var nextSlideWidth = nextSlide.data('slide-width');
            adjustWrapperWidth(nextSlideWidth);
        });
    });
</script>
 <script th:inline="javascript">
    	 var livros = /*[[${livros}]]*/;
   	</script>
	<script>
	    $(document).ready(function () {
			$('.edit-button').click(function () {
            var livroId = $(this).data('id');
            window.location.href = '/livros/edit/' + livroId;
        });
	  });
	</script>
    <script th:inline="javascript">
    	 var livros = /*[[${livros}]]*/
   	</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html>
